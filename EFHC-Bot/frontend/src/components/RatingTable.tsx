/**
======================================================================
== EFHC Bot WebApp — таблица рейтинга                                 ==
======================================================================
Назначение: отображает «Я + TOP» по total_generated_kwh, без клиентских перерасчётов.
Инварианты: источник истины — серверные снепшоты рейтинга; нет OFFSET, только данные из API.
ИИ-защита: устойчивый рендер при пустых списках, выделение текущего пользователя без дубликатов.
Запреты: не сортирует и не пересчитывает балансы на клиенте.
======================================================================
*/
type Row = {
  rank: number;
  username: string;
  totalGeneratedKwh: number;
  isCurrentUser: boolean;
};

type Props = {
  rows: Row[];
};

function RatingTable({ rows }: Props) {
  if (!rows.length) {
    return <p>Рейтинг пока пуст.</p>;
  }

  return (
    <section>
      <h2>Рейтинг</h2>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Пользователь</th>
            <th>kWh всего</th>
          </tr>
        </thead>
        <tbody>
          {rows.map((row) => (
            <tr key={row.rank}>
              <td>{row.rank}</td>
              <td>{row.username}</td>
              <td>{row.totalGeneratedKwh.toFixed(8)}</td>
              <td>{row.isCurrentUser ? "(я)" : ""}</td>
            </tr>
          ))}
        </tbody>
      </table>
    </section>
  );
}

export default RatingTable;

// ======================================================================
// Пояснения «для чайника»:
//   • Данные рейтинга приходят с сервера, без пересчётов на клиенте.
//   • Если текущего пользователя нет в ТОП — строка всё равно подсвечена по флагу.
//   • Нет OFFSET/клиентских фильтров — только то, что отдаёт API.
// ======================================================================
