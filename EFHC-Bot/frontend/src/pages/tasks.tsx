/**
======================================================================
== EFHC Bot WebApp — задания                                          ==
======================================================================
Назначение: отображает задания и их статусы; подтверждение и выплаты происходят на сервере через банк.
Инварианты: выплаты бонусов только через Idempotency-Key и efhc_transfers_log; клиент не утверждает задания сам.
ИИ-защита: безопасно выводит список, при ошибке показывает пустое состояние.
Запреты: нет прямых денежных операций и P2P.
======================================================================
*/
import { useEffect, useState } from "react";

import { ApiClient, TaskView } from "../lib/api";

const api = new ApiClient();

function TasksPage() {
  const [tasks, setTasks] = useState<TaskView[]>([]);

  useEffect(() => {
    api.getTasks().then(setTasks);
  }, []);

  return (
    <main>
      <h2>Задания</h2>
      {tasks.length ? (
        <ul>
          {tasks.map((task) => (
            <li key={task.id}>
              <div>{task.title}</div>
              <div>Награда: {task.rewardEfhc} EFHC</div>
              <div>Статус: {task.status}</div>
            </li>
          ))}
        </ul>
      ) : (
        <p>Список задач пуст.</p>
      )}
    </main>
  );
}

export default TasksPage;

// ======================================================================
// Пояснения «для чайника»:
//   • Отправка доказательств и модерация происходят на сервере, не здесь.
//   • Выплаты делают серверные сервисы tasks_service + transactions_service.
//   • UI только отображает данные и не влияет на балансы.
// ======================================================================
