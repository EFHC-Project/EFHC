/**
======================================================================
== EFHC Bot WebApp — рейтинг                                          ==
======================================================================
Назначение: отображает таблицу «Я + TOP» по total_generated_kwh.
Инварианты: данные приходят с сервера (rating_snapshots); клиент не сортирует и не использует OFFSET.
ИИ-защита: при ошибке показывает пустой список, выделяет текущего пользователя по флагу.
Запреты: нет изменения балансов, нет локальных вычислений рейтинга.
======================================================================
*/
import { useEffect, useState } from "react";

import RatingTable from "../components/RatingTable";
import { ApiClient, RatingRow } from "../lib/api";

const api = new ApiClient();

function RatingPage() {
  const [rows, setRows] = useState<RatingRow[]>([]);

  useEffect(() => {
    api.getRating().then(setRows);
  }, []);

  return (
    <main>
      <RatingTable rows={rows} />
    </main>
  );
}

export default RatingPage;

// ======================================================================
// Пояснения «для чайника»:
//   • Рейтинг вычисляется на сервере; клиент только показывает готовые строки.
//   • Никаких клиентских фильтров/offset — всё приходит курсорно с бэкенда.
//   • Ошибки загрузки дают пустой список, но UI остаётся рабочим.
// ======================================================================
